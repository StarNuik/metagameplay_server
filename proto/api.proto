syntax = "proto3";

message Empty {}

// Authorization
service Auth {
	rpc Login(LoginReq) returns (UserSession) {}
}

message LoginReq {
	optional string username = 1;
}

message UserSession {
	optional string session_token = 1;
}

// Business logic
service Shop {
	rpc GetLoginReward(Empty) returns (User) {}
	rpc GetUserData(Empty) returns (User) {}
	rpc GetShopItems(Empty) returns (ItemsList) {}
	rpc BuyItem(BuyItemReq) returns (User) {}
	rpc SellItem(SellItemReq) returns (User) {}
}

message BuyItemReq {
	optional string item_name = 1;
}
message SellItemReq {}

message ItemsList {
	repeated Item items = 1;
}

message Item {
	optional string name = 1;
	optional int64 price = 2;
}

message User {
	optional string username = 1;
	optional int32 credits = 2;
	repeated OwnedItem items = 3;
}

message OwnedItem {
	optional string name = 1;
	optional int64 quantity = 2;
}


